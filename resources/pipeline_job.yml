resources:
  jobs:
    mobilidade_urbana_pipeline:
      name: "Pipeline Mobilidade Urbana BH"
      description: "Pipeline diário: Bronze → Silver → Gold"

      tasks:
        - task_key: extracao_dados_pbh
          spark_python_task:
            python_file: ../src/utils/extrair_dados_PBH.py
          environment_key: default

        - task_key: bronze_layer
          depends_on:
            - task_key: extracao_dados_pbh
          spark_python_task:
            python_file: ../src/bronze/load_bronze_layer.py
          environment_key: default

        - task_key: silver_layer
          depends_on:
            - task_key: bronze_layer
          spark_python_task:
            python_file: ../src/silver/load_silver_layer.py
          environment_key: default

        - task_key: create_dims
          depends_on:
            - task_key: silver_layer
          spark_python_task:
            python_file: ../src/gold/create_dims.py
          environment_key: default

        - task_key: gold_layer
          depends_on:
            - task_key: silver_layer
          spark_python_task:
            python_file: ../src/gold/load_gold_layer.py
          environment_key: default
          
      environments:
        - environment_key: default
          spec: 
            client: "2"